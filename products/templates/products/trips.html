{% extends 'base.html' %}
{% load static %}

{% block page_nav %}
{% include 'includes/light_nav.html' %}
<div class="row justify-content-center py-3 icon-menu-bar">
    <div class="col-12 col-md-7 d-flex justify-content-around align-items-center">
        <a href="#trip1"><img src="{% static '../media/missiontomars.png' %}" alt="Moon Landing Icon"></a>
        <a href="#trip2"><img src="{% static '../media/moonlanding.png' %}" alt="Earth Orbit Icon"></a>
        <a href="#trip3"><img src="{% static '../media/earthorbit.png' %}" alt="Earth Orbit Icon"></a>
        <a href="#trip4"><img src="{% static '../media/iss.png' %}" alt="Earth Orbit Icon"></a>
    </div>
</div>
{% endblock page_nav %}

{% block content %}
<section class="container-fluid">
    
    
    <div class="row">
        {%for product in products %}
        <div class="col-12 col-lg-6 image-container" id="trip{{ forloop.counter }}">
            <img class="" src="{{ product.image.url }}" alt="{{ product.name }}" />
            <a href="{% url 'trip_detail' product.id %}">
                <p>{{ product.name }}</p>
            </a>
        </div>
        {% endfor %}
    </div>
    
    <div class="row search-trips-form justify-content-center">
        <button type="button" class="toggle-form"><i class="far fa-calendar-alt fa-2x"></i></button>
        <div class="col-md-10 col-xl-9 py-4">
            {% crispy form %}   
        </div>
    </div>
</section>
{% endblock content %}


{% block postloadjs %}
<script>

    $('#selected-trip').change(function() {
        if ($('#selected-trip').val() == '') {
            $('#passengers-max').prop("disabled", true);
        }
        else {
            let maxNm = $('#selected-trip option:selected').data('maxNum');         
            $('#passengers-max').attr("max", maxNm).prop("disabled", false);
        }
    });

    $('.toggle-form').click(function(){
        $(".search-trips-form").toggleClass("position-translate");
    });
        
</script>
{% endblock postloadjs %}
